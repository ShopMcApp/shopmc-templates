<html lang="pl-PL">

<head>
    <title><%= shop.name %></title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <% if(shop.icon){ %>
    <link rel="icon" type="image/x-icon" href="<%= shop.icon %>">
    <% } %>
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <style>
        html {
            scroll-behavior: smooth;
        }

        /* width */
        ::-webkit-scrollbar {
            width: 6px;
        }

        /* Track */
        ::-webkit-scrollbar-track {
            background: rgb(23, 23, 23);
        }

        /* Handle */
        ::-webkit-scrollbar-thumb {
            background: rgb(21, 128, 61);
        }

        /* Handle on hover */
        ::-webkit-scrollbar-thumb:hover {
            background: rgb(21, 128, 61);
        }
    </style>
</head>

<body>
    <div
        class="min-h-screen pb-6 bg-zinc-950 text-gray-300 flex flex-col items-center sm:px-[3rem] xl:px-[9rem] px-[2rem]">
        <div class="w-full p-8 flex bg-zinc-900 mt-10 rounded-3xl flex items-center gap-8 uppercase text-xl font-bold ">
            <img src="<%= shop.icon %>" class="w-12 h-12 rounded-xl" />
            <a href="#" class="hover:text-green-700">Sklep</a>
            <a href="#terms" class="hover:text-green-700">Regulamin</a>
            <a href="#voucher" class="hover:text-green-700 flex-1">Voucher</a>
            <% if(shop.discord){ %>
            <a href="<%= shop.discord_url %>" target="_blank">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">
                    <path fill="currentColor"
                        d="M19.27 5.33C17.94 4.71 16.5 4.26 15 4a.09.09 0 0 0-.07.03c-.18.33-.39.76-.53 1.09a16.09 16.09 0 0 0-4.8 0c-.14-.34-.35-.76-.54-1.09c-.01-.02-.04-.03-.07-.03c-1.5.26-2.93.71-4.27 1.33c-.01 0-.02.01-.03.02c-2.72 4.07-3.47 8.03-3.1 11.95c0 .02.01.04.03.05c1.8 1.32 3.53 2.12 5.24 2.65c.03.01.06 0 .07-.02c.4-.55.76-1.13 1.07-1.74c.02-.04 0-.08-.04-.09c-.57-.22-1.11-.48-1.64-.78c-.04-.02-.04-.08-.01-.11c.11-.08.22-.17.33-.25c.02-.02.05-.02.07-.01c3.44 1.57 7.15 1.57 10.55 0c.02-.01.05-.01.07.01c.11.09.22.17.33.26c.04.03.04.09-.01.11c-.52.31-1.07.56-1.64.78c-.04.01-.05.06-.04.09c.32.61.68 1.19 1.07 1.74c.03.01.06.02.09.01c1.72-.53 3.45-1.33 5.25-2.65c.02-.01.03-.03.03-.05c.44-4.53-.73-8.46-3.1-11.95c-.01-.01-.02-.02-.04-.02zM8.52 14.91c-1.03 0-1.89-.95-1.89-2.12s.84-2.12 1.89-2.12c1.06 0 1.9.96 1.89 2.12c0 1.17-.84 2.12-1.89 2.12zm6.97 0c-1.03 0-1.89-.95-1.89-2.12s.84-2.12 1.89-2.12c1.06 0 1.9.96 1.89 2.12c0 1.17-.83 2.12-1.89 2.12z" />
                </svg>
            </a>
            <% } %>
            <% if(shop.facebook){ %>
            <a href="<%= shop.facebook_url %>" target="_blank">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">
                    <path fill="currentColor"
                        d="M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.84 3.44 8.87 8 9.8V15H8v-3h2V9.5C10 7.57 11.57 6 13.5 6H16v3h-2c-.55 0-1 .45-1 1v2h3v3h-3v6.95c5.05-.5 9-4.76 9-9.95z" />
                </svg>
            </a>
            <% }; %>
            <% if(shop.tiktok){ %>
            <a href="<%= shop.tiktok_url %>" target="_blank">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">
                    <path fill="currentColor"
                        d="M16.6 5.82s.51.5 0 0A4.278 4.278 0 0 1 15.54 3h-3.09v12.4a2.592 2.592 0 0 1-2.59 2.5c-1.42 0-2.6-1.16-2.6-2.6c0-1.72 1.66-3.01 3.37-2.48V9.66c-3.45-.46-6.47 2.22-6.47 5.64c0 3.33 2.76 5.7 5.69 5.7c3.14 0 5.69-2.55 5.69-5.7V9.01a7.35 7.35 0 0 0 4.3 1.38V7.3s-1.88.09-3.24-1.48z" />
                </svg>
            </a>
            <% } %>
        </div>
        <div id="main" class="w-full">
            <div class="text-6xl font-bold mt-[10rem]">
                <%= shop.name %>
            </div>
            <div class="mb-10 mt-3 text-2xl text-gray-400 ">
                <%= shop.description %>
            </div>
            <button class="rounded-2xl bg-green-700 py-5 my-auto px-8 text-lg uppercase mb-[10rem]">
                Skopiuj adres serwera
            </button>
            <div class="flex text-gray-400 items-center gap-3 text-xl opacity-[0.7]">
                Sklep z produktami
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 20 20">
                    <path fill="#888888" fill-rule="evenodd"
                        d="M10 3a.75.75 0 0 1 .75.75v10.638l3.96-4.158a.75.75 0 1 1 1.08 1.04l-5.25 5.5a.75.75 0 0 1-1.08 0l-5.25-5.5a.75.75 0 1 1 1.08-1.04l3.96 4.158V3.75A.75.75 0 0 1 10 3"
                        clip-rule="evenodd" />
                </svg>
            </div>
            <div class="bg-zinc-900 rounded-3xl mt-4 p-10 text-lg mb-20">
                <div class="flex gap-5 items-center flex-wrap">
                    <div class="font-bold">
                        Wybierz tryb
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
                        <path fill="#888888" fill-rule="evenodd"
                            d="M3 10a.75.75 0 0 1 .75-.75h10.638L10.23 5.29a.75.75 0 1 1 1.04-1.08l5.5 5.25a.75.75 0 0 1 0 1.08l-5.5 5.25a.75.75 0 1 1-1.04-1.08l4.158-3.96H3.75A.75.75 0 0 1 3 10"
                            clip-rule="evenodd" />
                    </svg>
                    <% for(let server of shop.servers) { %>
                    <button
                        class="serverButton w-full md:w-fit rounded-2xl border-2 border-green-700 p-3 px-10 text-lg uppercase hover:opacity-[0.7] transition-all duration-200"
                        onclick="setServer('<%= server.id %>')"
                        id="serverButton<%= server.id %>">
                        <%= server.name %>
                    </button>
                    <% } %>
                </div>
                <div class="flex gap-8 lg:flex-row flex-col">
                    <% for(let server of shop.servers) { %>
                    <div class="mt-10 flex flex-col gap-5 max-h-[30rem] overflow-y-scroll pr-4 w-full lg:w-[28rem] server <%= server.id === shop.servers[0].id ? '' : 'hidden'%>" id="<%= server.id %>">
                        <% for(let product of shop.products) { if(product.server === server.id){ %>
                        <button
                            class="productButton border-green-700 bg-zinc-800 h-30 rounded-3xl p-6 flex gap-4 hover:opacity-[0.7] transition-opacity duration-200 text-left"
                            onclick="setProduct('<%= product.id %>')"
                            id="productButton<%= product.id %>"
                            >
                            <img src="<%= product.icon %>" class="w-16 h-16 rounded-2xl" />
                            <div class="flex flex-col gap-2">
                                <div class="text-xl font-bold">
                                    <%= product.name %>
                                </div>
                                <div class="text-xl font-bold text-green-700">
                                    <%= product.price %> PLN
                                </div>
                            </div>
                        </button>
                        <% } } %>
                    </div>
                    <% } %>
                    <% for(let product of shop.products) { %>
                    <div class="mt-8 flex-grow product <%= product.id === shop.products.find((a) => a.server === shop.servers[0].id).id ? '' : 'hidden'%>" id="<%= shop.id %>">
                        <div class="text-3xl font-bold">SUPER VIP <span class="text-green-700 bg-zinc-800 p-1 rounded-lg">16 PLN</span></div>
                        <button
                            class="rounded-2xl bg-green-700 py-3 mt-6 px-20 px-10 text-lg uppercase hover:opacity-[0.5] transition-all duration-200">
                            Kup teraz
                        </button>
                        <pre class="mt-6">
Najtańsza dostępna ranga na serwerze.
Przywileje rangi:
prefix VIP
kit VIP           
                        </pre>
                    </div>
                    <% } %>
                </div>


            </div>
            <div class="flex text-gray-400 items-center gap-3 text-xl opacity-[0.7]">
                Ostatnie zakupy
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 20 20">
                    <path fill="#888888" fill-rule="evenodd"
                        d="M10 3a.75.75 0 0 1 .75.75v10.638l3.96-4.158a.75.75 0 1 1 1.08 1.04l-5.25 5.5a.75.75 0 0 1-1.08 0l-5.25-5.5a.75.75 0 1 1 1.08-1.04l3.96 4.158V3.75A.75.75 0 0 1 10 3"
                        clip-rule="evenodd" />
                </svg>
            </div>

            <div
                class="bg-zinc-900 rounded-3xl mt-4 p-10 text-lg mb-20 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-5">
                <% if(shop.orders){ for(let order of shop.orders) { %>
                <div class="bg-zinc-800 p-5 h-fit flex gap-4 items-center rounded-3xl">
                    <img src="https://minotar.net/avatar/<%= order.nick %>/48" class="w-12 h-12 rounded-2xl" />
                    <div>
                        <div class="font-extrabold text-lg">
                            <%= order.nick %>
                        </div>
                        <div class="text-sm">
                            <%= shop.products.find((p)=>p.id===order.product)?.name || 'Produkt został usunięty'  %>
                        </div>
                    </div>
                </div>
                <% } }%>
            </div>
        </div>

        <div id="terms" class="hidden md:p-12 p-8 bg-zinc-900 w-full rounded-3xl mt-10 overflow-scroll">
            <pre><%= shop.rules %></pre>
        </div>
        <div id="voucher" class="hidden w-full max-w-lg mt-12 bg-zinc-900 p-12 rounded-3xl">
            <div class="text-3xl font-bold uppercase text-center">Zrealizuj voucher</div>
            <div class="text-xl font-bold mt-6 mb-1 opacity-[0.7]">
                Nick z gry
            </div>
            <div class="flex flex-col md:flex-row gap-4">
                <input type="text" id="voucher-nick" class="rounded-xl bg-zinc-800 p-3 px-4 text-lg w-full"
                    placeholder="Wpisz nick..." />

            </div>
            <div class="text-xl font-bold mt-6 mb-1 opacity-[0.7]">
                Kod vouchera
            </div>
            <div class="flex flex-col md:flex-row gap-4">
                <input type="text" id="voucher-code" class="rounded-xl bg-zinc-800 p-3 px-4 text-lg w-full"
                    placeholder="Wpisz kod..." />
            </div>
            <button class="rounded-xl bg-green-700 p-3 px-10 text-lg uppercase w-full mt-6">Zrealizuj</button>
        </div>
    </div>
    <div class="w-full bg-zinc-900 flex justify-center text-medium">
        <div
            class="text-center px-6 w-full py-10 text-gray-400 flex justify-between flex-col md:flex-row items-center  sm:px-[3rem] xl:px-[9rem] px-[2rem]">
            <div>
                <%= shop.name %> nie jest w żaden sposób powiązany z Mojang AB.
            </div>
            <div>
                Sklep zasila
                <a href="https://shopmc.app" target="_blank" class="text-green-700 font-bold">
                    ShopMC
                </a>
            </div>
        </div>
    </div>
    <script>
        const setProduct = (id) => {
            console.log(id)
            for (let server of document.getElementsByClassName('productButton')) {
                server.classList.remove('border')
            }
            document.getElementById(`productButton${id}`).classList.add('border')
        }

        const setServer = (id) => {
            for (let server of document.getElementsByClassName('server')) {
                server.classList.add('hidden')
            }
            for (let server of document.getElementsByClassName('serverButton')) {
                server.classList.remove('bg-green-700')
            }
            document.getElementById(`serverButton${id}`).classList.add('bg-green-700')
            document.getElementById(id).classList.remove('hidden')
        }

        const update = () => {
            document.getElementById('main').classList.add('hidden')
            document.getElementById('terms').classList.add('hidden')
            document.getElementById('voucher').classList.add('hidden')
            if (window.location.hash == '#terms') {
                document.getElementById('terms').classList.remove('hidden')
            } else if (window.location.hash == '#voucher') {
                document.getElementById('voucher').classList.remove('hidden')
            } else {
                document.getElementById('main').classList.remove('hidden')
            }
        }

        update()

        window.addEventListener('hashchange', (e) => {
            update()
        })
    </script>
</body>

</html>